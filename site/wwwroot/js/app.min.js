(function(){"use strict";var n=function(){var n=this;return n.list=[{id:"feed",text:"\u041b\u0435\u043d\u0442\u0430"},{id:"actual",text:"\u0410\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u0435"}],n.active=n.list[0].id,n.isActive=function(t){return n.active===t},n.activate=function(t){n.active=t},n},t=function(){var n=this;return n.queue=[],n.is=function(){return n.queue.length!==0},n.begin=function(){n.queue.push(0)},n.end=function(){n.queue.pop()},n},i=function(n,t,i,r,u){n.types=t;n.showSpinner=function(){return i.is()&&(r.data.length===0&&t.isActive("feed")||u.data.length===0&&t.isActive("actual"))};n.showSpinnerSmall=function(){return i.is()&&r.data.length>0}},r=function(n,t){var i=this;return i.data=[],i.read=function(){t.begin();n.get("/api/news/feed?skip="+i.data.length).then(function(n){for(var t=0;t<n.data.length;t++)i.data.push(n.data[t])}).finally(function(){t.end()})},i},u=function(n,t,i){n.news=t.data;n.readMore=function(){i.is()||t.read()};t.data.length===0&&t.read()},f=function(n,t){var i=this;return i.data=[],i.read=function(){t.begin();n.get("/api/news/actual").then(function(n){for(var t=0;t<n.data.length;t++)i.data.push(n.data[t])}).finally(function(){t.end()})},i},e=function(n,t,i,r){n.news=i.data;n.goToFeed=function(){r.activate("feed");t.scrollTo(0,0)};i.data.length===0&&i.read()};angular.module("timeline",[]).factory("TypesSvc",["$window",n]).factory("LoadingSvc",[t]).controller("RootCtrl",["$scope","TypesSvc","LoadingSvc","FeedSvc","ActualSvc",i]).factory("FeedSvc",["$http","LoadingSvc",r]).controller("FeedCtrl",["$scope","FeedSvc","LoadingSvc",u]).factory("ActualSvc",["$http","LoadingSvc",f]).controller("ActualCtrl",["$scope","$window","ActualSvc","TypesSvc",e])})();