(function(){"use strict";angular.module("timeline",[])})(),function(){"use strict";var n=function(n,t,i,r,u){var f=this;f.type=undefined;f.init=function(n){f.type=n;r.getData(n).length===0&&r.read(n)};f.getData=function(){return r.getData(f.type)};f.readMore=function(){u.is()||(r.read(f.type),i.click(f.type,"Read More"))};f.open=function(n){t.open(n.Url,"_blank");i.click(f.type,"Read")};f.toggleSocials=function(n){n.socials?(n.socials=!1,i.click(f.type,"Close Share")):(n.socials=!0,i.click(f.type,"Open Share"))};f.shareVk=function(n){t.open("http://vk.com/share.php?url="+n.Url,"_blank");i.click(f.type,"Share with VK")};f.shareTw=function(n){t.open("https://twitter.com/intent/tweet?text="+n.Title+"&url="+n.Url+"&via=bstutimeline","_blank");i.click(f.type,"Share with Twitter")};f.shareFb=function(n){t.open("http://www.facebook.com/sharer/sharer.php?u="+n.Url,"_blank");i.click(f.type,"Share with FB")};n.news={init:f.init,getData:f.getData,readMore:f.readMore,open:f.open,toggleSocials:f.toggleSocials,share:{vk:f.shareVk,tw:f.shareTw,fb:f.shareFb}}};angular.module("timeline").controller("NewsCtrl",["$scope","$window","AnalyticsSvc","NewsSvc","LoadingSvc",n])}(),function(){"use strict";var n=function(n,t,i,r,u){var f=this;f.showSpinner=function(){return i.is()&&(r.getData("Feed").length===0&&t.isActive("feed")||r.getData("Upcoming").length===0&&t.isActive("upcoming"))};f.showSpinnerSmall=function(){return i.is()&&(r.getData("Feed").length>0&&t.isActive("feed")||r.getData("Upcoming").length>0&&t.isActive("upcoming"))};f.toTopAnalytics=function(){console.log(3);var n=t.active[0].toUpperCase()+t.active.substring(1);u.click(n,"Back to the top")};n.root={types:t,showSpinner:f.showSpinner,showSpinnerSmall:f.showSpinnerSmall,toTopAnalytics:f.toTopAnalytics}};angular.module("timeline").controller("RootCtrl",["$scope","TypesSvc","LoadingSvc","NewsSvc","AnalyticsSvc",n])}(),function(){"use strict";var n=function(n){var t=function(t,i,r){var u=parseInt(r.showAfter),f=parseInt(r.stickOn);u||(u=450);f||(f=180);i.addClass("hidden");angular.element(n).on("scroll",function(){var t=n.document.body.scrollHeight-n.document.body.scrollTop-n.document.body.clientHeight;t<=f?i.addClass("stick"):i.removeClass("stick");n.document.body.scrollTop>=u?i.removeClass("hidden"):i.addClass("hidden")});i.on("click",function(){n.scrollTo(0,0)})};return{restrict:"E",link:t}};angular.module("timeline").directive("toTop",["$window",n])}(),function(){"use strict";var n=function(){var n=this;return n.counters={},n.getCounter=function(t){return n.counters.hasOwnProperty(t)?(n.counters[t]++,n.counters[t]):(n.counters[t]=1,1)},n.click=function(t,i){var r=n.getCounter(t+i);ga("send","event",t,"click",i+" #"+r)},n};angular.module("timeline").factory("AnalyticsSvc",["$timeout",n])}(),function(){"use strict";var n=function(){var n=this;return n.queue=[],n.is=function(){return n.queue.length!==0},n.begin=function(){n.queue.push(0)},n.end=function(){n.queue.pop()},n};angular.module("timeline").factory("LoadingSvc",[n])}(),function(){"use strict";var n=function(n,t){var i=this;return i.data={},i.getData=function(n){return i.data[n]||(i.data[n]=[]),i.data[n]},i.read=function(r){t.begin();i.data[r]||(i.data[r]=[]);var u="/api/news/"+r+"?skip="+i.data[r].length;n.get(u).then(function(n){for(var t=0;t<n.data.length;t++)i.data[r].push(n.data[t])}).finally(function(){t.end()})},i};angular.module("timeline").factory("NewsSvc",["$http","LoadingSvc",n])}(),function(){"use strict";var n=function(n){var t=this;return t.list=[{id:"feed",text:"\u041b\u0435\u043d\u0442\u0430"},{id:"upcoming",text:"\u0411\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435"}],t.active=t.list[0].id,t.isActive=function(n){return t.active===n},t.activate=function(i){t.active=i;n.click("Go to",i)},t};angular.module("timeline").factory("TypesSvc",["AnalyticsSvc",n])}();